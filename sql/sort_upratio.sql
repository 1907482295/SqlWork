SELECT *,getFutureUpRatio(epsMax,epsMin,priceMax,priceMin,eps2018,eps2017,nowClose) as upratio,getShiYingLv(eps2018, priceMin) as 市盈率Min,getShiYingLv(eps2018, nowClose)  as 市盈率2018 ,getShiYingLv(eps2018, priceMax)  as 市盈率Max  FROM ShareDB.share_results_20170315 where eps2018 > eps2017 and share_no not like "3%" and nowClose < 40 and jibenmian >7 and zijinmian >1 and ( jyaq = "上涨阶段"   or jyaq = "B点") order by upratio desc;